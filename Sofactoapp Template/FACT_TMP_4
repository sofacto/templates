<apex:page standardController="sofactoapp__Factures_Client__c"
    extensions="sofactoapp.FactureProcessingControllerExtension" renderAs="pdf" showHeader="false" sidebar="false"
    language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}">

    <!-- Styles -->
    <apex:stylesheet value="{!URLFOR($Resource.sofactoapp__INVOICE_STYLE)}" />

    <div id="wrap" style="position:relative;">
        <!-- FOOTER -->
        <div class="footer">
            <apex:outputPanel id="panelHeaderFooter2" styleClass="footer_center small"
                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false}" layout="block">
                <hr />
                <!-- Pied de page/ Footer Brouillon/ Proforma-->
                <table class="borderOff">
                    <tr>
                        <td style="text-align:left">
                            <b>
                                <apex:outputText
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Enseigne__c}"
                                    rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Enseigne__c))}" />
                                <apex:outputText
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.Name}"
                                    rendered="{!ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Enseigne__c)}" />
                            </b>

                            &nbsp;•&nbsp;
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Rue__c}" />
                            &nbsp;•&nbsp;
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Code_postal__c}" />
                            &nbsp;
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Ville__c}" />
                            &nbsp;•&nbsp;
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Liste_pays__c}" />
                            <br />
                            <apex:outputText
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__T_l_phone__c.Label}" />
                            &nbsp;:&nbsp;
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__T_l_phone__c}" />
                            &nbsp;•&nbsp;

                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Email__c}" />

                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Forme_juridique__c<>'Association'}">
                                &nbsp;•&nbsp;
                                <apex:outputText
                                    rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__TVA_intra__c))}"
                                    value="{!$Label.sofactoapp__text_intracommunitytva} {!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__TVA_intra__c}" />
                            </apex:outputPanel>
                            <!--Seulement si pays RS = France/ Only if country of corporate name = France-->
                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Liste_pays__c='France'}">
                                &nbsp;•&nbsp;
                                <apex:outputText
                                    value="{!$Label.sofactoapp__Text_APE} : 
                                         {!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__APE__c}" />
                            </apex:outputPanel>
                            <br />
                            <!--Mentions légales/ Legal notice-->
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Forme_juridique__c}" />
                            &nbsp;
                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Forme_juridique__c<>'Association'}">
                                <apex:outputText value="{!$Label.sofactoapp__text_capitalof}" />&nbsp;
                                <sofactoapp:CurrencyFormat
                                    p_amount="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Capital_social__c}"
                                    p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}" p_scale="2"
                                    p_stripTrailingZeros="2" />
                                &nbsp;
                            </apex:outputPanel>

                            <!--Seulement si pays RS = France/ Only if country of corporate name = France-->
                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Liste_pays__c='France'}">
                                <apex:outputText
                                    value="{!$Label.sofactoapp__text_registeredat} {!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Ville_RCS__c} {!$Label.sofactoapp__text_numberrcs} {!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Lettre_RCS__c} {!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__SIREN__c}" />

                            </apex:outputPanel>

                            <br />&nbsp;
                        </td>
                        <td style="text-align: right; vertical-align: top;">
                            <apex:outputText value="{!$Label.sofactoapp__text_pagenumber}" />&nbsp; <span
                                class="pagenumber" />/
                            <span class="pagecount" /><br />

                            <apex:outputText style="font-size:16px; font-weight:bold; color:red"
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__website__c}" />

                        </td>
                    </tr>

                    <!-- Saut de ligne/ Line Break -->
                    <tr>
                        <td class='borderOff'>&nbsp;</td>
                    </tr>
                </table>

            </apex:outputPanel>

            <!-- Pied de page/ Footer Original/ Duplicata-->
            <apex:outputPanel id="panelHeaderFooter" styleClass="footer_center small"
                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == true}" layout="block">
                <hr />
                <table class="borderOff">
                    <tr>
                        <td style="text-align:left">
                            <b>
                                <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_Emise__c}" />
                            </b>
                            &nbsp;•&nbsp;
                            <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_Rue_Emise__c}" />
                            &nbsp;•&nbsp;

                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_Code_postal_Emise__c}" />&nbsp;
                            <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_Ville_Emise__c}" />
                            &nbsp;•&nbsp;

                            <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_Pays_Emise__c}" />
                            <br />
                            <apex:outputText
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__T_l_phone__c.Label}" />
                            :
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__T_l_phone__c}" />
                            &nbsp;•&nbsp;
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Email__c}" />

                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Forme_juridique__c<>'Association'}">
                                &nbsp;•&nbsp;

                                <apex:outputText
                                    rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__RS_TVA_intra_Emise__c))}"
                                    value="{!$Label.sofactoapp__text_intracommunitytva} : {!sofactoapp__Factures_Client__c.sofactoapp__RS_TVA_intra_Emise__c}" /><br />
                            </apex:outputPanel>

                            <!--Seulement si pays RS = France/ Only if country of corporate name = France-->
                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Liste_pays__c='France'}">
                                &nbsp;•&nbsp;
                                <apex:outputText value="{!$Label.sofactoapp__Text_APE} : 
                                         {!sofactoapp__Factures_Client__c.sofactoapp__RS_Code_NAF_Emise__c}" />
                            </apex:outputPanel>
                            <br />

                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_juridique_Emise__c}" />&nbsp;

                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Forme_juridique__c!='Association'}">
                                &nbsp;
                                <apex:outputText value="{!$Label.sofactoapp__text_capitalof}" />&nbsp;
                                <sofactoapp:CurrencyFormat
                                    p_amount="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Capital_social__c}"
                                    p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}" p_scale="2"
                                    p_stripTrailingZeros="2" />
                                &nbsp;
                            </apex:outputPanel>
                            <!--Seulement si pays RS = France/ Only if country of corporate name = France-->
                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Liste_pays__c='France'}">

                                <apex:outputText
                                    value="{!$Label.sofactoapp__text_registeredat} {!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Ville_RCS__c} {!$Label.sofactoapp__text_numberrcs} {!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Lettre_RCS__c} {!sofactoapp__Factures_Client__c.sofactoapp__RS_Siren_Emise__c}" />
                            </apex:outputPanel>

                        </td>
                        <td style="text-align: right; vertical-align: top;">
                            <apex:outputText value="{!$Label.sofactoapp__text_pagenumber}" />&nbsp; <span
                                class="pagenumber" />/
                            <span class="pagecount" /><br /><br /><br />
                            <apex:outputText style="font-size:16px; font-weight:bold; color:red"
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__website__c}" />

                        </td>
                    </tr>

                    <!-- Saut de ligne/ Line Break -->
                    <tr>
                        <td class='borderOff'>&nbsp;</td>
                    </tr>
                </table>
            </apex:outputPanel>

            <!-- FIN FOOTER -->
        </div>

        <!-- HEADER -->
        <div class="header">
            <table>
                <tr>

                    <td Width="40%">
                        <b>
                            <apex:outputpanel style="font-size:25px">

                                <apex:outputField
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__Type_de_facture__c}" />
                                &nbsp;
                            </apex:outputpanel>


                            <apex:outputText style="font-size:25px"
                                value="{!IF (sofactoapp__Factures_Client__c.sofactoapp__IsSent__c, sofactoapp__Factures_Client__c.sofactoapp__Reference__c, sofactoapp__Factures_Client__c.Name)}" />
                        </b>
                        <!--Sous-type/ Subtype-->
                        <apex:outputPanel style="font-size:15px"
                            rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Sous_type__c))}">
                            <br /><i>
                                <apex:outputField value="{!sofactoapp__Factures_Client__c.sofactoapp__Sous_type__c}" />
                            </i>
                            <br />
                        </apex:outputPanel>
                        <br />
                        <!--Brouillon/ Draft-->
                        <apex:outputPanel
                            rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false && ISBLANK($CurrentPage.parameters.proforma)}">
                            <apex:outputText value="{!$Label.sofactoapp__text_provisionaldocument}" />&nbsp;
                        </apex:outputPanel>
                        <!--Proforma-->
                        <apex:outputPanel
                            rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false && NOT(ISBLANK($CurrentPage.parameters.proforma))}">
                            <apex:outputText value="{!$Label.sofactoapp__text_provisionaldocument}" />&nbsp;
                        </apex:outputPanel>

                        <br />
                        <apex:outputPanel layout="none"
                            rendered="{!NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Facture_initiale__c))}">
                            <apex:outputText
                                value=" {!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Facture_initiale__c.Label} : " />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__Facture_initiale__r.sofactoapp__Reference__c}" />
                            <br /><br />
                        </apex:outputPanel>
                    </td>

                    <td Width="20%" class="aligncenter">
                        <!--NUMERO REIMPRESSION/ REPRINT NUMBER
                        <apex:outputPanel rendered="{!sofactoapp__Factures_Client__c.sofactoapp__Duplicata__c == true}">
                            <apex:outputText
                                value="{!$ObjectType.sofactoapp__Facture_pdf__c.Fields.sofactoapp__impressionNumber__c.Label} : {!sofactoapp__Factures_Client__c.sofactoapp__PDF_reference__r.sofactoapp__impressionNumber__c}" />
                        </apex:outputPanel>-->
                        <!--TAMPON DUPLICATA/ STAMP : DUPLICATE-->
                        <!--FR-->
                        <apex:outputPanel
                            rendered="{!AND(sofactoapp__Factures_Client__c.sofactoapp__Duplicata__c,OR(sofactoapp__Factures_Client__c.sofactoapp__Langue__c=='fr_FR',ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Langue__c)))}">
                            <apex:image id="stampDuplicata" alt="Duplicata"
                                value="{!$Resource.sofactoapp__Tampon_Duplicata}" style="width:100px" />
                        </apex:outputPanel>
                        <!--EN-->
                        <apex:outputPanel
                            rendered="{!AND(sofactoapp__Factures_Client__c.sofactoapp__Duplicata__c,sofactoapp__Factures_Client__c.sofactoapp__Langue__c=='en_US')}">
                            <apex:image id="stampDuplicataEN" alt="Duplicata"
                                value="{!$Resource.sofactoapp__Tampon_Duplicata_EN}" style="width:100px" />
                        </apex:outputPanel>

                        <!--TAMPON BROUILLON/ STAMP : DRAFT-->
                        <!--FR-->

                        <apex:outputPanel
                            rendered="{!AND(sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false, ISBLANK($CurrentPage.parameters.proforma),OR(sofactoapp__Factures_Client__c.sofactoapp__Langue__c=='fr_FR',ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Langue__c)))}">
                            <apex:image id="stampBrouillon" alt="Brouillon"
                                value="{!$Resource.sofactoapp__Tampon_Brouillon}" style="width:100px" />
                        </apex:outputPanel>
                        <!--EN-->
                        <apex:outputPanel
                            rendered="{!AND(sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false, ISBLANK($CurrentPage.parameters.proforma),sofactoapp__Factures_Client__c.sofactoapp__Langue__c=='en_US')}">
                            <apex:image id="stampBrouillonEN" alt="Brouillon"
                                value="{!$Resource.sofactoapp__Tampon_Brouillon_EN}" style="width:100px" />
                        </apex:outputPanel>




                        <!---TAMPON PROFORMA-->
                        <apex:outputPanel
                            rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false && NOT(ISBLANK($CurrentPage.parameters.proforma))}">
                            <apex:image id="stampProforma" alt="Proforma"
                                value="{!$Resource.sofactoapp__Tampon_Proforma}" />
                        </apex:outputPanel>
                        <apex:outputPanel>



                            <!--Horodatage Proforma/ Timestamp Draft-->
                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false && NOT(ISBLANK($CurrentPage.parameters.proforma))}">
                                <br />
                                <i>
                                    <apex:outputText Style="font-size:7px;"
                                        value="{!$Label.sofactoapp__text_timestamp} : {!NOW()}" /> </i>
                            </apex:outputPanel>
                            <!--Horodatage Brouillon/ Timestamp Draft -->
                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false && ISBLANK($CurrentPage.parameters.proforma)}">
                                <br />
                                <i>
                                    <apex:outputText Style="font-size:7px;"
                                        value="{!$Label.sofactoapp__text_timestamp} : {!NOW()}" /> </i>
                            </apex:outputPanel>
                            <!--Horodatage Duplicata / Timestamp Duplicate-->
                            <apex:outputPanel rendered="{!sofactoapp__Factures_Client__c.sofactoapp__Duplicata__c}">
                                <br />
                                <i>
                                    <apex:outputText Style="font-size:7px;"
                                        value="{!$Label.sofactoapp__text_timestamp} : {!NOW()}" /> </i>
                            </apex:outputPanel>
                            <!--Facture Emise-->
                            <apex:outputPanel
                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == true && sofactoapp__Factures_Client__c.sofactoapp__Duplicata__c==false}">
                                <br />
                                <i>
                                    <apex:outputText Style="font-size:7px;"
                                        value="{!$Label.sofactoapp__text_timestamp} : {!sofactoapp__Factures_Client__c.sofactoapp__issued_Timestamp__c}" />
                                </i>
                            </apex:outputPanel>
                        </apex:outputPanel>
                    </td>
                    <td Width="40%" class="aligncenter">

                        <apex:image id="logo"
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Logo__c}"
                            alt="Logo"
                            rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Logo__c))}"
                            style="height:80px;" />
                    </td>

                </tr>

            </table>
            <hr />

        </div>
        <table style="page-break-inside: avoid;page-break-before:auto">
            <tr>
                <!-- INVOICE DETAILS -->
                <td style="width:60%; vertical-align:top">


                    <!--Numéro de la facture initiale (si type d'avoir)/ Initial invoice number (if credit note)-->


                    <b>
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Date_de_facture__c.Label}" />
                        :&nbsp;</b>

                    <apex:outputText value="{0,date,dd'/'MM'/'yyyy}">
                        <apex:param value="{!sofactoapp__Factures_Client__c.sofactoapp__Date_de_facture__c}" />
                    </apex:outputText>
                    <br />

                    <!--Date de livraison/ Shipping Date -->
                    <apex:outputPanel
                        rendered="{!IF(NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Date_de_livraison__c)),'','none')}">

                        <b>
                            <apex:outputText
                                value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Date_de_livraison__c.Label} :" />
                            &nbsp;</b>
                        <apex:outputText value="{0,date,dd'/'MM'/'yyyy}">
                            <apex:param value="{!sofactoapp__Factures_Client__c.sofactoapp__Date_de_livraison__c}" />
                        </apex:outputText>
                        <br />
                    </apex:outputPanel>

                    <!--Date d'échéance/ Due date-->
                    <apex:outputpanel
                        rendered="{!NOT(sofactoapp__Factures_Client__c.sofactoapp__Afficher_coordonnees_bancaires__c)}">

                        <b>
                            <apex:outputText
                                value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Ech_ance__c.Label} :" />
                            :&nbsp;</b>


                        <apex:outputText value="{0,date,dd'/'MM'/'yyyy}">
                            <apex:param value="{!sofactoapp__Factures_Client__c.sofactoapp__Ech_ance__c}" />
                        </apex:outputText>
                        <br />

                    </apex:outputPanel>


                    <!--Numéro compte client/ Client's Account Number-->
                    <apex:outputPanel
                        rendered="{!IF(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__isDisplayAccountNumber__c, IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Opportunit__c)), '', 'none'),'none')}">


                        <b>
                            <apex:outputText value="{!$ObjectType.Account.Fields.AccountNumber.Label} : " /></b>
                        &nbsp;

                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.AccountNumber}" />
                        <br />
                    </apex:outputPanel>
                    <!--Interlocuteur RS venant du compte/ Contact of your company from Account-->

                    <apex:outputPanel
                        rendered="{!IF(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__isDisplayAccountOwner__c, '', 'none')}">

                        <b>
                            <apex:outputText value="{!$Label.sofactoapp__text_yourcontact} :" /> </b>
                        <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.owner.Name}" />
                        <br />
                    </apex:outputPanel>
                    <!--Interlocuteur RS venant de l'opportunité/ Contact of your company from Opportunity-->
                    <apex:outputPanel
                        rendered="{!IF(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__isDisplayOpportunityOwner__c, IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Opportunit__c)), '', 'none'),'none')}">
                        <b>
                            <apex:outputText value="{!$Label.sofactoapp__text_yourcontact} :" /> </b>
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Opportunit__r.owner.Name}" />
                        <br />

                    </apex:outputPanel>
                    <br />

       <!--Adresse livraison/ Shipping address-->

                    <!--Brouillon ou Proforma-->
                    <apex:outputPanel rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false}">
                        <apex:outputPanel
                            rendered="{!IF(NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Compte__r.ShippingStreet)), '', 'none')}">
                            <apex:outputText value="{!$Label.sofactoapp__text_adresse_livraison}"
                                style="font-size:9px" />
                            <br />



                            <b>
                                <apex:outputText style="font-size:12px;text-transform: uppercase"
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.Name}" />
                            </b>

                            <apex:outputPanel layout="none"
                                rendered="{!NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Contact__c))}">
                                <br />
                                <i>{!$Label.sofactoapp__Text_A_l_attention_de}</i>
                                <apex:outputText
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__Contact__r.Salutation} {!sofactoapp__Factures_Client__c.sofactoapp__Contact__r.FirstName} {!sofactoapp__Factures_Client__c.sofactoapp__Contact__r.LastName}" />
                            </apex:outputPanel>
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.shippingStreet}" />
                            <br />

                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.shippingPostalCode}" />
                            &nbsp;
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.shippingCity}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.shippingCountry}" />
                        </apex:outputPanel>
                        <apex:outputPanel
                            rendered="{!IF(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Compte__r.ShippingStreet), '', 'none')}">
                            <i>
                                <apex:outputText value="{!$Label.sofactoapp__text_adresse_livraison}"
                                    style="font-size:7px" />
                            </i>
                            <br />
                            <b>
                                <apex:outputText style="font-size:12px;text-transform: uppercase"
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Nom_du_compte_Emise__c}" />
                            </b>
                            <apex:outputPanel layout="none"
                                rendered="{!NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Contact__c))}">
                                <br />
                                <i>{!$Label.sofactoapp__Text_A_l_attention_de}</i>
                                <apex:outputText
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__Contact__r.Salutation} {!sofactoapp__Factures_Client__c.sofactoapp__Contact__r.FirstName} {!sofactoapp__Factures_Client__c.sofactoapp__Contact__r.LastName}" />
                            </apex:outputPanel>
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Rue_Facturation_Emise__c}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Code_Postal_Compte_Emise__c} {!sofactoapp__Factures_Client__c.sofactoapp__ACC_Ville_facturation_emise__c}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Pays_Facturation_emise__c}" />
                        </apex:outputPanel>
                    </apex:outputPanel>

                    <!--Original/ Duplicata-->
                    <apex:outputPanel rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == true}">
                        <apex:outputPanel
                            rendered="{!IF(NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Compte__r.ShippingStreet)), '', 'none')}">
                            <apex:outputText value="{!$Label.sofactoapp__text_adresse_livraison}"
                                style="font-size:9px" /><br />

                            <b>
                                <apex:outputText style="font-size:12px;text-transform: uppercase"
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Nom_du_compte_Emise__c}" />
                            </b>
                            <br />
                            <apex:outputPanel layout="none"
                                rendered="{!NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__ACC_Nom_contact_Emise__c))}">
                                <i>{!$Label.sofactoapp__Text_A_l_attention_de}</i>
                                <br />
                                <apex:outputText
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Nom_contact_Emise__c}" /><br />
                            </apex:outputPanel>
                            
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Rue_d_exp_dition_emise__c}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Code_postal_d_exp_dition_emise__c}" />
                            &nbsp;
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Ville_d_exp_dition_emise__c}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Pays_d_exp_dition_emise__c}" />
                            <br />
                        </apex:outputPanel>
                        <apex:outputPanel
                            rendered="{!IF(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Compte__r.ShippingStreet), '', 'none')}">
                            <i>
                                <apex:outputText value="{!$Label.sofactoapp__text_adresse_livraison}"
                                    style="font-size:7px" />
                            </i>
                            <br />
                            <b>
                                <apex:outputText style="font-size:12px;text-transform: uppercase"
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Nom_du_compte_Emise__c}" />
                            </b>
                            <br />
                            <apex:outputPanel layout="none"
                                rendered="{!NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__ACC_Nom_contact_Emise__c))}">
                                <i>{!$Label.sofactoapp__Text_A_l_attention_de}</i>
                                <br />
                                <apex:outputText
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Nom_contact_Emise__c}" /><br />
                            </apex:outputPanel>
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Rue_Facturation_Emise__c}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Code_Postal_Compte_Emise__c} {!sofactoapp__Factures_Client__c.sofactoapp__ACC_Ville_facturation_emise__c}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Pays_Facturation_emise__c}" />
                        </apex:outputPanel>
                    </apex:outputPanel>
                </td>
                <!--Adresse facturation/ Billing address-->
                <td style="width:40%;vertical-align:top">
                    <!--Brouillon ou Proforma-->
                    <apex:outputPanel rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false}">

                        <apex:outputText value="{!$Label.sofactoapp__text_adresse_facturation}"
                            style="font-size:9px;text-align:left;" />
                        <br />
                        <b>
                            <apex:outputText style="font-size:12px;text-transform: uppercase"
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.Name}" />
                        </b>
                        <apex:outputPanel layout="none"
                            rendered="{!NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Contact__c))}">
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__Contact__r.Salutation} {!sofactoapp__Factures_Client__c.sofactoapp__Contact__r.FirstName} {!sofactoapp__Factures_Client__c.sofactoapp__Contact__r.LastName}" />

                        </apex:outputPanel>
                        <br />
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.BillingStreet}" />
                        <br />
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.BillingPostalCode}" />&nbsp;
                        <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.BillingCity}" />
                        <br />
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.BillingCountry}" />
                        <br />
                        <apex:outputPanel
                            rendered="{!IF(sofactoapp__Factures_Client__c.sofactoapp__Amount_VAT__c >= 150,'','none')}">
                            <apex:outputText style="text-align:left"
                                value="{!$Label.sofactoapp__text_intracommunitytva} : {!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.sofactoapp__TVA_intra__c}"
                                rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Compte__r.sofactoapp__TVA_intra__c))}" /><br />
                        </apex:outputPanel>
                        <!--Lettre RCS / Ville RCS / SIREN or NIF // FRANCE ONLY-->

                        <!--Donnée comptable / Accounting Data -->
                        <apex:outputPanel rendered="{!IF(AND (sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__c != null,
                                    sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__Lettre_RCS__c != null,
                                    sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__Pays_facturation__c='France'),
                                    '','none')}">
                            <apex:outputText
                            value="{!$Label.sofactoapp__Sofacto_RCS} 
                                                    {!sofactoapp__Factures_Client__c.sofactoapp__Ville_RCS__c}" />
                            <br />
                            <apex:outputText
                            value="{!$Label.sofactoapp__Text_NumberRCS} {!sofactoapp__Factures_Client__c.sofactoapp__Lettre_RCS__c} 
                                                    {!sofactoapp__Factures_Client__c.sofactoapp__SIREN_NIF__c}" />
                        </apex:outputPanel>

                        <!--Compte/ Account-->
                        <apex:outputPanel rendered="{!IF(AND(sofactoapp__Factures_Client__c.sofactoapp__Compte__r.BillingCountry = 'France',
                                                (ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__c))),
                                                    '','none')}">
                            <apex:outputText
                            value="{!$Label.sofactoapp__Sofacto_RCS} 
                                                {!sofactoapp__Factures_Client__c.sofactoapp__Ville_RCS__c}" />
                            <br />
                            <apex:outputText
                            value="{!$Label.sofactoapp__Text_NumberRCS} {!sofactoapp__Factures_Client__c.sofactoapp__Lettre_RCS__c} 
                                                {!sofactoapp__Factures_Client__c.sofactoapp__SIREN_NIF__c}" />
                        </apex:outputPanel>

                        <!--NIF // EXEPT FRANCE-->

                        <!--Donnée comptable / Accounting Data -->
                        <apex:outputPanel rendered="{!IF(AND (sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__c != null,
                                                    sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__SIREN_NIF__c != null,
                                                    sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__Pays_facturation__c !='France'),
                                                    '','none')}">
                            <apex:outputText
                            value="{!$Label.Sofacto_NIF} {!sofactoapp__Factures_Client__c.sofactoapp__SIREN_NIF__c}" />
                        </apex:outputPanel>

                        <!--Compte/ Account-->
                        <apex:outputPanel rendered="{!IF(AND(sofactoapp__Factures_Client__c.sofactoapp__Compte__r.BillingCountry != 'France',
                                                    (ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__c)),
                                                    sofactoapp__Factures_Client__c.sofactoapp__Compte__r.sofactoapp__SIREN_NIF__c != null),
                                                    '','none')}">
                            <apex:outputText
                            value="{!$Label.Sofacto_NIF} {!sofactoapp__Factures_Client__c.sofactoapp__SIREN_NIF__c}" />
                        </apex:outputPanel>
                    </apex:outputPanel>

                    <!--Originale ou Duplicata-->
                    <apex:outputPanel rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == true}">
                        <apex:outputText value="{!$Label.sofactoapp__text_adresse_facturation}"
                            style="font-size:9px;text-align:left;" />
                        <br />
                        <b>

                            <apex:outputText style="text-transform: uppercase;font-size:12px;text-align:left"
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Nom_du_compte_Emise__c}" /></b>
                        <br />
                        <apex:outputPanel style="text-align:left" layout="none"
                            rendered="{!NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__ACC_Nom_contact_Emise__c))}">

                            <i>{!$Label.sofactoapp__Text_A_l_attention_de}&nbsp;</i><br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Nom_contact_Emise__c}" /><br />
                        </apex:outputPanel>
                        
                        <apex:outputText style="text-align:left"
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Rue_Facturation_Emise__c}" />
                        <br />
                        <apex:outputText style="text-align:left"
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Code_Postal_Compte_Emise__c} {!sofactoapp__Factures_Client__c.sofactoapp__ACC_Ville_facturation_emise__c}" />
                        <br />
                        <apex:outputText style="text-align:left"
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__ACC_Pays_Facturation_emise__c}" />
                        <br /><br />
                        <apex:outputPanel
                            rendered="{!IF(sofactoapp__Factures_Client__c.sofactoapp__Amount_VAT__c >= 150,'','none')}">
                            <apex:outputText style="text-align:left"
                                rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__ACC_TVA_intra_Emise__c))}"
                                value="{!$Label.sofactoapp__text_intracommunitytva} : {!sofactoapp__Factures_Client__c.sofactoapp__ACC_TVA_intra_Emise__c}" /><br />
                        </apex:outputPanel>
                        
                        <!--Lettre RCS / Ville RCS / SIREN or NIF // FRANCE ONLY-->

                        <!--Donnée comptable / Accounting Data -->
                        <apex:outputPanel rendered="{!IF(AND (sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__c != null,
                                    sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__Lettre_RCS__c != null,
                                    sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__Pays_facturation__c='France'),
                                    '','none')}">
                            <apex:outputText
                            value="{!$Label.sofactoapp__Sofacto_RCS} 
                                                    {!sofactoapp__Factures_Client__c.sofactoapp__Ville_RCS__c}" />
                            <br />
                            <apex:outputText
                            value="{!$Label.sofactoapp__Text_NumberRCS} {!sofactoapp__Factures_Client__c.sofactoapp__Lettre_RCS__c} 
                                                    {!sofactoapp__Factures_Client__c.sofactoapp__SIREN_NIF__c}" />
                        </apex:outputPanel>

                        <!--Compte/ Account-->
                        <apex:outputPanel rendered="{!IF(AND(sofactoapp__Factures_Client__c.sofactoapp__Compte__r.BillingCountry = 'France',
                                                (ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__c))),
                                                    '','none')}">
                            <apex:outputText
                            value="{!$Label.sofactoapp__Sofacto_RCS} 
                                                {!sofactoapp__Factures_Client__c.sofactoapp__Ville_RCS__c}" />
                            <br />
                            <apex:outputText
                            value="{!$Label.sofactoapp__Text_NumberRCS} {!sofactoapp__Factures_Client__c.sofactoapp__Lettre_RCS__c} 
                                                {!sofactoapp__Factures_Client__c.sofactoapp__SIREN_NIF__c}" />
                        </apex:outputPanel>

                        <!--NIF // EXEPT FRANCE-->

                        <!--Donnée comptable / Accounting Data -->
                        <apex:outputPanel rendered="{!IF(AND (sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__c != null,
                                                    sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__SIREN_NIF__c != null,
                                                    sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__Pays_facturation__c !='France'),
                                                    '','none')}">
                            <apex:outputText
                            value="{!$Label.Sofacto_NIF} {!sofactoapp__Factures_Client__c.sofactoapp__SIREN_NIF__c}" />
                        </apex:outputPanel>

                        <!--Compte/ Account-->
                        <apex:outputPanel rendered="{!IF(AND(sofactoapp__Factures_Client__c.sofactoapp__Compte__r.BillingCountry != 'France',
                                                    (ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__c)),
                                                    sofactoapp__Factures_Client__c.sofactoapp__Compte__r.sofactoapp__SIREN_NIF__c != null),
                                                    '','none')}">
                            <apex:outputText
                            value="{!$Label.Sofacto_NIF} {!sofactoapp__Factures_Client__c.sofactoapp__SIREN_NIF__c}" />
                        </apex:outputPanel>
                    </apex:outputPanel>

                    <br />

                </td>

            </tr>


            <!-- Saut de ligne/ Line Break -->
            <tr>
                <td style="height:30px">&nbsp;</td>
            </tr>

            <tr>
                <td style="background-color:#E6E6E6; " colspan="3">
                    <!--Objet de la facture/ Invoice Subject-->
                    <apex:outputPanel
                        rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Objet_Facture__c))}"
                        layout="none">
                        <b>
                            <apex:outputText Style="font-size:20px"
                                value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Objet_Facture__c.Label} : " />
                        </b>
                        <apex:outputText Style="font-size:20px"
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Objet_Facture__c}" /><br />
                    </apex:outputPanel>
                    <!--V/Ref / Reference-->
                    <apex:outputPanel rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__V_R_f__c))}"
                        layout="none">
                        <b>
                            <apex:outputText
                                value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__V_R_f__c.Label} :" />
                        </b>
                        <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__V_R_f__c}" /><br />
                    </apex:outputPanel>
                    <!--Commentaire/ Comment-->
                    <apex:outputPanel
                        rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Commentaires__c))}"
                        layout="none">
                        <b>
                            <apex:outputText
                                value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Commentaires__c.Label} :" />
                        </b>
                        <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Commentaires__c}" />
                    </apex:outputPanel>
                    <!--Numéro compte client/ Client's Account Number-->
                    <apex:outputPanel
                        rendered="{!IF(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__isDisplayAccountNumber__c, IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Compte__r.AccountNumber)), '', 'none'),'none')}"
                        layout="none">
                        <b>
                            <apex:outputText value="{!$ObjectType.Account.Fields.AccountNumber.Label}:" /> </b>
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.AccountNumber}" />
                        <br /></apex:outputPanel>
                </td>
            </tr>
        </table>
        <!-- FIN HEADER -->
        <br />
        <hr />
        <div style="position :relative">
            <table class="borderOn">
                <!-- Ligne ent�te produits -->
                <tr>
                    <th class="alignleft">
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Ligne_de_Facture__c.Fields.sofactoapp__Code_produit__c.Label}" />
                    </th>
                    <th class="alignleft">
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Ligne_de_Facture__c.Fields.sofactoapp__Description__c.Label}" />
                    </th>
                    <th class="aligncenter">
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Ligne_de_Facture__c.Fields.sofactoapp__Quantit__c.Label}" />
                    </th>
                    <th class="aligncenter">
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Ligne_de_Facture__c.Fields.sofactoapp__Prix_Unitaire_HT__c.Label}" />
                    </th>
                    <th class="aligncenter">
                        <apex:outputText value="{!$Label.sofactoapp__text_tva}" />
                    </th>
                    <!--Pourcentage Echeancier de facturation/ Percent Invoice Schedule-->
                    <th class="aligncenter"
                        style="display:{!IF(sofactoapp__Factures_Client__c.sofactoapp__Afficher_pourcentage__c, '', 'none')}">
                        <apex:outputText value="{!$Label.sofactoapp__text_percentbilled}" />
                    </th>
                    <th class="aligncenter"
                        style="display:{!IF(AND(sofactoapp__factures_client__c.sofactoapp__Montant_remise_lignes__c > 0,sofactoapp__factures_client__c.sofactoapp__Afficher_remise__c==true),'', 'none')}">
                        <apex:outputText value="{!$Label.sofactoapp__text_remise}" />
                    </th>
                    <th class="aligncenter">
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Ligne_de_Facture__c.Fields.sofactoapp__Montant_total_HT__c.Label}" />
                    </th>
                </tr>
                <!-- Pour chaque poste de facture -->
                <apex:repeat value="{!orderedInvoiceLineItems}" var="orderedLigne" id="orderedLignes">
                    <apex:repeat value="{!sofactoapp__Factures_Client__c.sofactoapp__Lignes_de_Facture__r}" var="ligne"
                        id="lignes">
                        <apex:outputPanel layout="none" rendered="{!ligne.Id == orderedLigne}">
                            <tr>
                                <td class="aligncenter">
                                    <apex:outputText value="{!ligne.sofactoapp__Produit__r.ProductCode}" />
                                </td>
                                <td class="alignleft">
                                    <apex:outputText value="{!ligne.sofactoapp__Description__c}" />
                                    <apex:outputpanel layout="none"
                                        rendered="{!sofactoapp__Factures_Client__c.sofactoapp__Afficher_details_produit__c}">
                                        <br /><i>
                                            <apex:outputText value="{!ligne.sofactoapp__Produit__r.Description}"
                                                style="font-size:9px;" /></i>
                                    </apex:outputPanel>
                                    <apex:outputpanel layout="none"
                                        rendered="{!sofactoapp__Factures_Client__c.sofactoapp__Afficher_description_detaillee__c}">
                                        <br /><span style="font-style: italic;">
                                            <apex:outputText value="{!ligne.sofactoapp__Description_detaillee__c}"
                                                style="font-size:9px;" /></span>
                                    </apex:outputPanel>
                                </td>
                                <td class="aligncenter">
                                    <apex:outputText value="{!ligne.sofactoapp__Quantit__c}" />
                                </td>
                                <td class="alignright">
                                    <sofactoapp:CurrencyFormat
                                                p_amount="{!ligne.sofactoapp__Prix_Unitaire_HT__c}"
                                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__Montant_remise_lignes__c > 0}"
                                                p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}"
                                                p_scale="2" p_stripTrailingZeros="2" />
                                    <sofactoapp:CurrencyFormat
                                                p_amount="{!ligne.sofactoapp__Prix_unitaire_HT_apres_remise__c}"
                                                rendered="{!sofactoapp__Factures_Client__c.sofactoapp__Montant_remise_lignes__c <=0}"
                                                p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}"
                                                p_scale="2" p_stripTrailingZeros="2" />
                                </td>
                                <td class="aligncenter">
                                    <apex:outputText value="{!ligne.sofactoapp__Taux_de_TVA_list__c}" />
                                </td>
                                <!--Pourcentage Echeancier de facturation/ Percent Invoice Schedule-->
                                <td class="aligncenter"
                                    style="display:{!IF(sofactoapp__Factures_Client__c.sofactoapp__Afficher_pourcentage__c, '', 'none')}">
                                    <apex:outputPanel
                                        rendered="{!IF(NOT(ISBLANK(ligne.sofactoapp__Pourcentage__c)),'', 'none')}">
                                        <apex:outputText value="{0, number, ###.00}%">
                                            <apex:param value="{!ligne.sofactoapp__Pourcentage__c}" />
                                        </apex:outputText>
                                    </apex:outputPanel>
                                    <apex:outputPanel
                                        rendered="{!IF(ISBLANK(ligne.sofactoapp__Pourcentage__c),'', 'none')}">
                                        <apex:outputText value="0.00%" />
                                    </apex:outputPanel>
                                </td>
                                <!--Remise ligne/ Line Item Discount-->
                                <td class="aligncenter"
                                    style="display:{!IF(AND(sofactoapp__factures_client__c.sofactoapp__Montant_remise_lignes__c > 0,sofactoapp__factures_client__c.sofactoapp__Afficher_remise__c==true),'', 'none')}">
                                    
                                        <apex:outputText value="{0, number, ###.00}%">
                                            <apex:param value="{!ligne.sofactoapp__Taux_Remise_2__c}" />
                                        </apex:outputText>
                                </td>
                                <td class="alignright">
                                    <sofactoapp:CurrencyFormat p_amount="{!ligne.sofactoapp__Montant_total_HT__c}"
                                        p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}" p_scale="2"
                                        p_stripTrailingZeros="2" />
                                </td>
                            </tr>
                        </apex:outputPanel>
                    </apex:repeat>
                </apex:repeat>
                <apex:variable var="colspan1"
                    value="{!IF(sofactoapp__Factures_Client__c.sofactoapp__Montant_remise_lignes__c > 0, IF(sofactoapp__Factures_Client__c.sofactoapp__Afficher_pourcentage__c, 7, 6), IF(sofactoapp__Factures_Client__c.sofactoapp__Afficher_pourcentage__c, 6, 5))}" />
                <apex:variable var="colspan2"
                    value="{!IF(sofactoapp__Factures_Client__c.sofactoapp__Montant_remise_lignes__c > 0, IF(sofactoapp__Factures_Client__c.sofactoapp__Afficher_pourcentage__c, 6, 5), IF(sofactoapp__Factures_Client__c.sofactoapp__Afficher_pourcentage__c, 5, 4))}" />
                <apex:variable var="colspan3"
                    value="{!IF(sofactoapp__Factures_Client__c.sofactoapp__Montant_remise_lignes__c > 0, IF(sofactoapp__Factures_Client__c.sofactoapp__Afficher_pourcentage__c, 7, 6), IF(sofactoapp__Factures_Client__c.sofactoapp__Afficher_pourcentage__c, 6, 5))}" />

                <!-- Saut de ligne/ Line Break -->
                <tr>
                    <td  class="borderOff">&nbsp;</td>
                </tr>
                <!-- Remise facture -->
                <tr
                    style="display:{!IF (sofactoapp__Factures_Client__c.sofactoapp__Discount_amount__c != 0, '', 'none')}">
                    <th class="alignleft" colspan="{!colspan3}">{!$Label.sofactoapp__Text_RemiseGlobale}</th>
                    <th class="alignright">
                        {!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Discount_amount__c.Label}
                    </th>
                </tr>
                <tr
                    style="display:{!IF (sofactoapp__Factures_Client__c.sofactoapp__Discount_amount__c != 0, '', 'none')}">
                    <td class="alignleft" colspan="{!colspan2}">
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Discount_description__c}" />
                    </td>
                    <td class="aligncenter">
                        <apex:outputText value="{0, number, ###.00}%">
                            <apex:param value="{!sofactoapp__Factures_Client__c.sofactoapp__Taux_Remise_2__c}" />
                        </apex:outputText>

                    </td>
                    <td class="alignright">
                        <sofactoapp:CurrencyFormat
                            p_amount="{!sofactoapp__Factures_Client__c.sofactoapp__Discount_amount__c}"
                            p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}" p_scale="2"
                            p_stripTrailingZeros="2" />
                    </td>
                </tr>

                <!-- Saut de ligne/ Line Break -->
                <tr>
                    <td class="borderOff">&nbsp;</td>
                </tr>

                <!-- Sous-total/ Subtotal -->
                <tr>
                    <td colspan="{!colspan3}" class="alignright" style="background-color:#E6E6E6">
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Amount_exVAT__c.Label}" />
                    </td>
                    <td class="alignright" style="background-color:#E6E6E6">
                        <sofactoapp:CurrencyFormat
                            p_amount="{!sofactoapp__Factures_Client__c.sofactoapp__Amount_exVAT__c}"
                            p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}" p_scale="2"
                            p_stripTrailingZeros="2" />
                    </td>
                </tr>

                <!-- TVA -->
                <tr
                    style="display:{!IF(sofactoapp__factures_client__c.sofactoapp__Montant_TVA_apres_remise__c != 0,'', 'none')}">
                    <td colspan="{!colspan3}" class="alignright" style="background-color:#E6E6E6">
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Montant_TVA_apres_remise__c.Label}" />
                        &nbsp;
                        <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__TVA_pc__c} %" />
                    </td>
                    <td class="alignright" style="background-color:#E6E6E6">
                        <sofactoapp:CurrencyFormat
                            p_amount="{!sofactoapp__Factures_Client__c.sofactoapp__Montant_TVA_apres_remise__c}"
                            p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}" p_scale="2"
                            p_stripTrailingZeros="2" />
                    </td>
                </tr>

                <!-- Total TTC -->
                <tr>
                    <td colspan="{!colspan3}" class="alignright"
                        style="background-color:gray;color:white;font-weight:bold">
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Amount_VAT__c.Label}" />
                    </td>
                    <td class="alignright" style="background-color:gray;color:white;font-weight:bold">
                        <sofactoapp:CurrencyFormat
                            p_amount="{!sofactoapp__Factures_Client__c.sofactoapp__Amount_VAT__c}"
                            p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}" p_scale="2"
                            p_stripTrailingZeros="2" />
                    </td>
                </tr>

            </table>
        </div>

        <br />
        <br />

        <table style="page-break-before:auto;page-break-inside: avoid">
            <tr>
                <td>
                    <!--Si pas de informations bancaires affichées sur la facture/ If no bank information displayed on the invoice-->

                    <apex:outputpanel
                        rendered="{!NOT(sofactoapp__Factures_Client__c.sofactoapp__Afficher_coordonnees_bancaires__c)}">

                        <!--Mode de paiement/ Payment mode-->
                        <apex:outputText style="text-transform:uppercase;"
                            value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Payment_mode__c.Label}" />
                        <br />
                        <apex:outputField value="{!sofactoapp__Factures_Client__c.sofactoapp__Payment_mode__c}" />
                        <br /><br />

                        <!--Délai de paiement/ Payment term-->

                        <apex:outputText style="text-transform:uppercase;"
                            value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Delai_paiement__c.Label}" />
                        <br />

                        <apex:outputField value="{!sofactoapp__Factures_Client__c.sofactoapp__Delai_paiement__c}" />
                        <br />




                    </apex:outputpanel>

                    <!--Bas de page Facture Brouillon - Proforma/ Invoice Conditions Draft - Proforma-->

                    <apex:outputPanel layout="none" style="page-break-before:auto;page-break-inside: avoid"
                        rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == false}">

                        <!-- Conditions particulières/ Special conditions -->
                        <apex:outputPanel layout="none"
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Conditions_Particuli_res__c)), '', 'none')}">

                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Conditions_Particuli_res__c.Label}" />
                            <br />

                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__Conditions_Particuli_res__c}" />
                            <br /><br />
                        </apex:outputpanel>

                        <!--Indemnité forfaitaire/ Lump sum compensation-->
                        <apex:outputpanel
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__L_indemnit_forfaitaire__c)), '', 'none')}">
                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__L_indemnit_forfaitaire__c.Label}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__L_indemnit_forfaitaire__c}" />
                            <br /><br />
                        </apex:outputPanel>

                        <!-- Informations complémentaires/ Additional information -->
                        <apex:outputPanel layout="none"
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Informations_compl_mentaires__c)), '', 'none')}">

                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__Informations_compl_mentaires__c.Label}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Informations_compl_mentaires__c}" />
                            <br /><br />
                        </apex:outputPanel>

                        <!--Pénalités en cas de retard/ Penalties in case of delay-->
                        <apex:outputPanel layout="none"
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__P_nalit_s_en_cas_de_retard__c)), '', 'none')}">
                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__P_nalit_s_en_cas_de_retard__c.Label}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__P_nalit_s_en_cas_de_retard__c}" />
                            <br /><br />
                        </apex:outputPanel>


                        <!-- Conditions d'escompte/ Discount conditions -->
                        <apex:outputPanel layout="none"
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__ConditionsEscompte__c)), '', 'none')}">
                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__ConditionsEscompte__c.Label}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__ConditionsEscompte__c}" />
                            <br /><br />
                        </apex:outputPanel>


                        <!--Mention TVA/ VAT information-->
                        <apex:outputPanel layout="none"
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__MentionsTVA__c)), '', 'none')}">
                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__MentionsTVA__c.Label}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__MentionsTVA__c}" />
                            <br /><br />
                        </apex:outputPanel>

                    </apex:outputPanel>

                    <!--Bas de page Facture Originale - Duplicata/ Invoice Conditions Original - Duplicate-->

                    <apex:outputPanel style="page-break-before:auto" layout="none"
                        rendered="{!sofactoapp__Factures_Client__c.sofactoapp__IsSent__c == true}">

                        <!-- Conditions particulières/ Special conditions -->

                        <apex:outputPanel layout="none" style="page-break-before:auto"
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Conditions_Particuli_res__c)), '', 'none')}">



                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Conditions_Particuli_res__c.Label}" />
                            <br />


                            <apex:outputText style="font-size:12px"
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__Conditions_Particuli_res__c}" />

                            <br /><br />



                        </apex:outputPanel>

                        <!--Indemnité forfaitaire/ Lump sum compensation-->

                        <apex:outputPanel layout="none" style="page-break-before:auto"
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__L_indemnit_forfaitaire__c)), '', 'none')}">


                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__L_indemnit_forfaitaire__c.Label}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_L_indemnit_forfaitaire_Emise__c}" />
                            <br /><br />
                        </apex:outputPanel>

                        <!-- Informations complémentaires/ Additional information -->
                        <apex:outputPanel layout="none"
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Informations_compl_mentaires__c)), '', 'none')}">

                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__Informations_compl_mentaires__c.Label}" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Informations_compl_mentaires__c}" />
                            <br /><br />
                        </apex:outputPanel>

                        <!--Pénalités en cas de retard/ Penalties in case of delay-->
                        <apex:outputPanel layout="block" style="page-break-before:auto">

                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__P_nalit_s_en_cas_de_retard__c.Label}" />

                            <br />
                            <apex:outputText style="font-size:12px"
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_Penalites_Emise__c}" />
                            <br /><br />
                        </apex:outputPanel>


                        



                        <!-- Conditions d'escompte/ Discount conditions -->
                        <apex:outputPanel layout="none" style="page-break-before:auto"
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__ConditionsEscompte__c)), '', 'none')}">


                            <apex:outputText style="text-transform:uppercase;"
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__ConditionsEscompte__c.Label}" />
                            <br />

                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_ConditionsEscompte_Emise__c}" />

                            <br /><br />
                        </apex:outputPanel>

                        

                        <!--Mention TVA/ VAT statement-->

                        <apex:outputPanel layout="none" style="page-break-before:auto"
                            rendered="{!IF(NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__MentionsTVA__c)), '', 'none')}">


                            <apex:outputText
                                value="{!$ObjectType.sofactoapp__Raison_Sociale__c.Fields.sofactoapp__MentionsTVA__c.Label}"
                                style="text-transform:uppercase;" />
                            <br />
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__MentionsTVA__c}" />
                            <br /><br />
                        </apex:outputPanel>
                    </apex:outputPanel>
                </td>
            </tr>
        </table>
        <hr />


        <!-- Echéancier/ Payment Plan -->

        <table class="borderOn" style="padding:0; margin:0;page-break-before:auto; page-break-inside: avoid;
        display:{!IF(AND(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__isDisplayPaymentSchedule__c,
        NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Echeancier_reglement__c)),
        sofactoapp__Factures_Client__c.sofactoapp__Type_de_facture__c<>'Avoir'), '', 'none')}">



            <!-- Saut de ligne/ Line Break -->
            <tr>
                <td class='borderOff'>&nbsp;</td>
            </tr>
            <!--Titre Echeancier/ Payment Plan Title-->
            <tr style="background-color:#E6E6E6;display:{!IF(numPayments > 1, '', 'none')}">
                <td colspan="6" class="borderOff alignleft"
                    style="text-align: center; text-transform: uppercase; font-weight: bold;display:{!IF(sofactoapp__Factures_Client__c.sofactoapp__Payment_mode__c='Stripe CB', '', 'none')}">
                    <apex:outputText value="{!$Label.sofactoapp__text_paymentschedule}" />
                </td>
                <td colspan="5" class="borderOff alignleft"
                    style="text-align: center; text-transform: uppercase; font-weight: bold;display:{!IF(sofactoapp__Factures_Client__c.sofactoapp__Payment_mode__c='Stripe CB', 'none', '')}">
                    <apex:outputText value="{!$Label.sofactoapp__text_paymentschedule}" />
                </td>
            </tr>
            <!--Titre Règlement/ Payment Title-->
            <tr style="background-color:#E6E6E6; display:{!IF(numPayments = 1, '', 'none')}">
                <td colspan="6" class="borderOff alignleft"
                    style="text-align: center; text-transform: uppercase; font-weight: bold;display:{!IF(sofactoapp__Factures_Client__c.sofactoapp__Payment_mode__c='Stripe CB', '', 'none')}">
                    <apex:outputText value="{!$ObjectType.sofactoapp__R_glement__c.Label}" />
                </td>
                <td colspan="5" class="borderOff alignleft"
                    style="text-align: center; text-transform: uppercase; font-weight: bold;display:{!IF(sofactoapp__Factures_Client__c.sofactoapp__Payment_mode__c='Stripe CB', 'none', '')}">
                    <apex:outputText value="{!$ObjectType.sofactoapp__R_glement__c.Label}" />
                </td>
            </tr>


            <tr style="page-break-before:auto; page-break-before:auto;">
                <!--Numéro de la ligne/ Line Number-->

                <th width="10%" class="alignleft borderOn">
                    N°

                </th>

                <!--Date de règlement/ Payment date-->
                <th width="18%" class="alignleft borderOn">
                    <apex:outputText value="{!$ObjectType.sofactoapp__R_glement__c.Fields.sofactoapp__Date__c.Label}" />
                </th>
                <!--Montant HT du règlement/ Amount before tax of the payment-->
                <th width="18%" class="alignleft borderOn">
                    <apex:outputText
                        value="{!$ObjectType.sofactoapp__R_glement__c.Fields.sofactoapp__AutoAmountBeforeTax__c.Label}" />
                </th>
                <!--Montant TVA du règlement/ VAT Amount of the payment-->
                <th width="18%" class="alignleft borderOn">
                    <apex:outputText
                        value="{!$ObjectType.sofactoapp__R_glement__c.Fields.sofactoapp__AutoVATAmount__c.Label}" />
                </th>

                <!--Montant TTC du règlement/ Amount after tax of the payment-->
                <th width="18%" class="alignleft borderOn">
                    <apex:outputText
                        value="{!$ObjectType.sofactoapp__R_glement__c.Fields.sofactoapp__Montant__c.Label}" />
                </th>


            </tr>
            <!--Lignes d’échéancier de règlement/ Payment plan items-->
            <apex:variable var="counter" value="{!1}" />




            <apex:repeat value="{!orderedPayments}" var="orderedPaymentsLigne" id="orderedPaymentsLignes">

                <apex:repeat value="{!sofactoapp__Factures_Client__c.sofactoapp__R_glements__r}" var="paymentLigne"
                    id="paymentLignes">

                    <apex:outputPanel layout="none" rendered="{!paymentLigne.Id == orderedPaymentsLigne}">
                        <apex:outputPanel layout="none">

                            <tr style="page-break-before:auto; page-break-before:auto">
                                <!--Numéro de la ligne/ Line Number-->
                                <td width="10%" style="text-align:center;">
                                    <apex:outputText value="{!counter}" />
                                    <apex:variable var="counter" value="{!counter+ 1}" />
                                </td>
                                <!--Date de règlement/ Payment date-->
                                <td width="18%" style="text-align:cen´ter;">

                                    <apex:outputText value="{0,date,dd'/'MM'/'yyyy}">
                                        <apex:param value="{!paymentLigne.sofactoapp__Date__c}" />
                                    </apex:outputText>
                                </td>

                                <!--Montant HT du règlement/ Amount before tax of the payment-->
                                <td width="18%" style="text-align:center;">
                                    <sofactoapp:CurrencyFormat
                                        p_amount="{!paymentLigne.sofactoapp__AutoAmountBeforeTax__c}" p_scale="2"
                                        p_stripTrailingZeros="2"
                                        p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}" />
                                </td>

                                <!--Montant TVA du règlement/ VAT Amount of the payment-->
                                <td width="18%" style="text-align:center;">
                                    <sofactoapp:CurrencyFormat p_amount="{!paymentLigne.sofactoapp__AutoVATAmount__c}"
                                        p_scale="2" p_stripTrailingZeros="2"
                                        p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}" />
                                </td>

                                <!--Montant TTC du règlement/ Amount after tax of the payment-->
                                <td width="18%" style="text-align:center;">
                                    <sofactoapp:CurrencyFormat p_amount="{!paymentLigne.sofactoapp__Montant__c}"
                                        p_scale="2" p_stripTrailingZeros="2"
                                        p_language="{!sofactoapp__Factures_Client__c.sofactoapp__Langue__c}" />
                                </td>


                            </tr>
                        </apex:outputPanel>
                    </apex:outputPanel>

                </apex:repeat>
            </apex:repeat>
        </table>



        <!-- Indices/ Indexes -->

        <apex:outputPanel layout="none"
            rendered="{!NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__IndiceId__c))}">
            <table class="borderOn" style="page-break-before:auto; page-break-inside: avoid">
                <!-- Saut de ligne/ Line Break -->
                <tr>
                    <td class='borderOff'>&nbsp;</td>
                </tr>
                <tr style="background-color:#E6E6E6">
                    <th>

                        <apex:outputText value="{!$Label.sofactoapp__text_index_title}" />
                    </th>
                </tr>
                <tr>
                    <td>
                        <apex:outputPanel layout="none">
                            <apex:outputText value="{!$Label.sofactoapp__text_formule_indice}" />
                            <br />
                            <apex:outputText
                                value="S0 = {!$Label.sofactoapp__text_index} {!sofactoapp__Factures_Client__c.sofactoapp__Abonnement__r.sofactoapp__Indice__r.Name} {0,date,dd'/'MM'/'yyyy}">
                                <apex:param
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__Abonnement__r.sofactoapp__Date_indice_reference__c}" />
                            </apex:outputText>
                            &nbsp;=&nbsp;
                            <apex:outputText value="{0, number, ###.00}">
                                <apex:param
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__Abonnement__r.sofactoapp__Coefficient_indice_reference__c}" />
                            </apex:outputText>
                            <br />
                            <apex:outputText
                                value="S1 = {!$Label.sofactoapp__text_index}{!sofactoapp__Factures_Client__c.sofactoapp__Abonnement__r.sofactoapp__Indice__r.Name} {0,date,dd'/'MM'/'yyyy}">
                                <apex:param value="{!sofactoapp__Factures_Client__c.sofactoapp__Date_indice__c}" />
                            </apex:outputText>
                            &nbsp;=&nbsp;
                            <apex:outputText value="{0, number, ###.00}">
                                <apex:param
                                    value="{!sofactoapp__Factures_Client__c.sofactoapp__Coefficient_indice_date__c}" />
                            </apex:outputText>
                            <br />
                        </apex:outputPanel>
                    </td>
                </tr>
                <!-- Saut de ligne/ Line Break -->
                <tr>
                    <td class='borderOff'>&nbsp;</td>
                </tr>
            </table>
        </apex:outputPanel>


        <!-- Coordonnées bancaires/ Bank Details -->

        <apex:outputPanel layout="none"
            rendered="{!sofactoapp__Factures_Client__c.sofactoapp__Afficher_coordonnees_bancaires__c && OR(NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__Autres_coordonnees_bancaires__c)), NOT(ISBLANK(sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Coordonnees_bancaires_par_defaut__c)))}"
            style="font-size:11px">
            <br />
            <table class="borderOn" style="width:100%;page-break-before:auto;page-break-inside: avoid;">
                <tr>
                    <td colspan="5" style="background-color:#E6E6E6">
                        <b>
                            <apex:outputText value="{!$ObjectType.sofactoapp__Coordonnees_bancaires__c.Label}" /></b>
                    </td>
                </tr>

                <!--Domiciliation/ Domiciliation-->
                <tr>
                    <th width="20%">
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Coordonnees_bancaires__c.Fields.sofactoapp__Domiciliation__c.Label}" />
                    </th>
                    <td width="30%">
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Coordonnees_bancaires_par_defaut__r.sofactoapp__Domiciliation__c}"
                            rendered="{!ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Autres_coordonnees_bancaires__c)}" />
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Autres_coordonnees_bancaires__r.sofactoapp__Domiciliation__c}"
                            rendered="{!NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Autres_coordonnees_bancaires__c))}" />
                    </td>
                    <!--Date d'échéance/ Due date-->

                    <th>
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Ech_ance__c.Label}" />
                    </th>
                    <td class="alignleft" style="width:20%">
                        <apex:outputText value="{0,date,dd'/'MM'/'yyyy}">
                            <apex:param value="{!sofactoapp__Factures_Client__c.sofactoapp__Ech_ance__c}" />
                        </apex:outputText>
                    </td>

                </tr>

                <!--IBAN-->
                <tr>
                    <th>
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Coordonnees_bancaires__c.Fields.sofactoapp__IBAN__c.Label}" />
                    </th>
                    <td>
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Coordonnees_bancaires_par_defaut__r.sofactoapp__IBAN__c}"
                            rendered="{!ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Autres_coordonnees_bancaires__c)}" />
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Autres_coordonnees_bancaires__r.sofactoapp__IBAN__c}"
                            rendered="{!NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Autres_coordonnees_bancaires__c))}" />
                    </td>

                    <!--Mode de paiement/ Payment mode-->

                    <th>
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Payment_mode__c.Label}" />

                    </th>
                    <td style="width:20%" class="alignleft">
                        <apex:outputField value="{!sofactoapp__Factures_Client__c.sofactoapp__Payment_mode__c}" />
                    </td>

                </tr>
                <!--BIC/ SWIFT CODE -->
                <tr>
                    <th>
                        <apex:outputText
                            value="{!$ObjectType.sofactoapp__Coordonnees_bancaires__c.Fields.sofactoapp__BIC__c.Label}" />
                    </th>
                    <td>
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Coordonnees_bancaires_par_defaut__r.sofactoapp__BIC__c}"
                            rendered="{!ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Autres_coordonnees_bancaires__c)}" />
                        <apex:outputText
                            value="{!sofactoapp__Factures_Client__c.sofactoapp__Autres_coordonnees_bancaires__r.sofactoapp__BIC__c}"
                            rendered="{!NOT(ISNULL(sofactoapp__Factures_Client__c.sofactoapp__Autres_coordonnees_bancaires__c))}" />
                    </td>
                    <!--Délai de paiement/ Payment term-->

                        <!--Délais pas personnalisé / No customized payment term-->
                        <th
                            style="display:{!IF(sofactoapp__Factures_Client__c.sofactoapp__Delai_paiement__c !='Délai Personnalisé','','none')}">
                            <apex:outputText
                                value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Delai_paiement__c.Label}" />
                        </th>
                        <td style="width:20%;display:{!IF(sofactoapp__Factures_Client__c.sofactoapp__Delai_paiement__c !='Délai Personnalisé','','none')}" class="alignleft">
                            <apex:outputField value="{!sofactoapp__Factures_Client__c.sofactoapp__Delai_paiement__c}" />
                        </td>

                        <!--Délais personnalisé / Customized payment term-->
                        <th
                            style="display:{!IF(sofactoapp__Factures_Client__c.sofactoapp__Delai_paiement__c =='Délai Personnalisé','','none')}">
                            <apex:outputText
                                value="{!$ObjectType.sofactoapp__Factures_Client__c.Fields.sofactoapp__Delai_paiement__c.Label}" />
                        </th>
                        <td style="width:20%;display:{!IF(sofactoapp__Factures_Client__c.sofactoapp__Delai_paiement__c =='Délai Personnalisé','','none')}" class="alignleft">
                            <apex:outputText
                                value="{!sofactoapp__Factures_Client__c.sofactoapp__NombreDeJoursDelaiPaiement__c} "/> 
                            <apex:outputField value="{!sofactoapp__Factures_Client__c.sofactoapp__MethodeCalculEcheancePaiement__c}" />
                        </td>
                </tr>

            </table>
        </apex:outputPanel>

    </div>
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Afficher_pourcentage__c}" rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Afficher_remise__c}" rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_Code_NAF_Emise__c}" rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__RS_TVA_intra_Emise__c}" rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__c}" rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__Pays_facturation__c}" rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Ville_RCS__c}" rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__SIREN_NIF__c}" rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Lettre_RCS__c}" rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Afficher_Tableau_Repartition_TVA__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Lettre_RCS__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.sofactoapp__Lettre_RCS__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__Lettre_RCS__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__Ville_RCS__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Donnee_Comptable__r.sofactoapp__SIREN_NIF__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__Ville_RCS__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.sofactoapp__Ville_RCS__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Compte__r.sofactoapp__SIREN_NIF__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__APE__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__TVA_intra__c}"
        rendered="false" />
    <apex:outputText
        value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__isDisplayPaymentSchedule__c}"
        rendered="false" />
    <apex:outputText
        value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__isDisplayAccountNumber__c}"
        rendered="false" />
    <apex:outputText
        value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__isDisplayAccountOwner__c}"
        rendered="false" />
    <apex:outputText
        value="{!sofactoapp__Factures_Client__c.sofactoapp__emetteur_facture__r.sofactoapp__isDisplayOpportunityOwner__c}"
        rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Montant_remise_lignes__c}" rendered="false" />
    <apex:outputText value="{!sofactoapp__Factures_Client__c.sofactoapp__Echeancier_reglement__c}" rendered="false" />
</apex:page>